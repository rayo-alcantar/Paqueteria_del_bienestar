{% extends 'base.html' %}

{% block title %}Solicitar Envío{% endblock %}

{% block content %}
<h1 id="principal">Solicitar Envío</h1>
<form method="POST" action="{% url 'solicitar_envio' %}">
    {% csrf_token %}
    
    <label for="nombre_emisor">Nombre del Remitente:</label>
    <input 
        type="text" 
        id="nombre_emisor" 
        name="remitente" 
        placeholder="Nombre completo del remitente" 
        required>
    
    <label for="direccion_recoleccion">Dirección de Recolección:</label>
    <textarea 
        id="direccion_recoleccion" 
        name="direccion_recoleccion" 
        placeholder="Dirección completa para recoger el paquete" 
        required></textarea>

    <label for="estado_origen">Estado de Origen:</label>
    <select id="estado_origen" name="estado_origen_id" required>
        <option value="" disabled selected>Seleccione un estado</option>
        {% for estado in estados %}
        <option value="{{ estado.id }}">{{ estado.nombre }}</option>
        {% endfor %}
    </select>

    <label for="nombre_receptor">Nombre del Receptor:</label>
    <input 
        type="text" 
        id="nombre_receptor" 
        name="receptor" 
        placeholder="Nombre completo del receptor" 
        required>
    
    <label for="direccion_entrega">Dirección de Entrega:</label>
    <textarea 
        id="direccion_entrega" 
        name="direccion_entrega" 
        placeholder="Dirección completa para entregar el paquete" 
        required></textarea>

    <label for="estado_destino">Estado de Destino:</label>
    <select id="estado_destino" name="estado_destino_id" required>
        <option value="" disabled selected>Seleccione un estado</option>
        {% for estado in estados %}
        <option value="{{ estado.id }}">{{ estado.nombre }}</option>
        {% endfor %}
    </select>

    <label for="peso">Peso del Paquete (kg):</label>
    <input 
        type="number" 
        id="peso" 
        name="peso" 
        step="0.1" 
        placeholder="Ingrese el peso en kilogramos" 
        required>

    <label for="descripcion">Descripción del Paquete:</label>
    <textarea 
        id="descripcion" 
        name="descripcion" 
        placeholder="Describa el contenido del paquete" 
        required></textarea>

    <button type="submit">Solicitar Recolección</button>
</form>

{% if codigo %}
    <h2>Detalles del Paquete</h2>
    <table>
        <tr>
            <th>Número de Rastreo</th>
            <td>{{ codigo }}</td>
        </tr>
        <tr>
            <th>Estado de Origen</th>
            <td>{{ estado_origen }}</td>
        </tr>
        <tr>
            <th>Estado de Destino</th>
            <td>{{ estado_destino }}</td>
        </tr>
        <tr>
            <th>Peso</th>
            <td>{{ peso }} kg</td>
        </tr>
        <tr>
            <th>Descripción</th>
            <td>{{ descripcion }}</td>
        </tr>
        <tr>
            <th>Nombre del Receptor</th>
            <td>{{ receptor }}</td>
        </tr>
        <tr>
            <th>Dirección de Entrega</th>
            <td>{{ direccion_entrega }}</td>
        </tr>
        <tr>
            <th>Nombre del Remitente</th>
            <td>{{ remitente }}</td>
        </tr>
        <tr>
            <th>Dirección de Recolección</th>
            <td>{{ direccion_recoleccion }}</td>
        </tr>
    </table>
{% elif error %}
    <p style="color: red;">{{ error }}</p>
{% endif %}
{% endblock %}
