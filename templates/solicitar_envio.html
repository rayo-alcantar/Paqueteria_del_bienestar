{% extends 'base.html' %}

{% block title %}Solicitar Envío{% endblock %}

{% block content %}

<style>
    body {
        background-color: #8B0000; /* Guinda */
        color: #FFFFFF;
        font-family: Arial, sans-serif;
    }

    .container {
        width: 50%;
        margin: auto;
        background-color: #B22222; /* Tonalidad de rojo */
        padding: 20px;
        border-radius: 10px;
    }

    h1 {
        text-align: center;
        color: #FFC0CB; /* Rosa */
    }

    label {
        display: block;
        margin-top: 10px;
        color: #FFFFFF;
    }

    input[type="text"],
    input[type="number"],
    textarea,
    select {
        width: 100%;
        padding: 10px;
        margin-top: 5px;
        border: none;
        border-radius: 5px;
    }

    button {
        background-color: #FF0000; /* Rojo */
        color: #FFFFFF;
        font-size: 16px;
        cursor: pointer;
        margin-top: 20px;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
    }

    button:hover {
        background-color: #CD0000; /* Tonalidad más oscura de rojo */
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }

    table, th, td {
        border: 1px solid #FFFFFF;
    }

    th, td {
        padding: 10px;
        text-align: left;
    }
</style>

<div class="container">
    <h1 id="principal">Solicitar Envío</h1>
    <form method="POST" action="{% url 'solicitar_envio' %}">
        {% csrf_token %}

        <!-- Nombre del Remitente -->
        <label for="nombre_emisor">Nombre del Remitente:</label>
        <input
            type="text"
            id="nombre_emisor"
            name="remitente"
            placeholder="Nombre completo del remitente"
            value="{{ form_data.remitente|default_if_none:'' }}"
            required>
        {% if errors.remitente %}
            <p style="color: red;">{{ errors.remitente }}</p>
        {% endif %}

        <!-- Dirección de Recolección Descompuesta -->
        <h2>Dirección de Recolección</h2>
        <label for="colonia_recoleccion">Colonia:</label>
        <input
            type="text"
            id="colonia_recoleccion"
            name="colonia_recoleccion"
            placeholder="Colonia"
            value="{{ form_data.colonia_recoleccion|default_if_none:'' }}"
            required>
        {% if errors.colonia_recoleccion %}
            <p style="color: red;">{{ errors.colonia_recoleccion }}</p>
        {% endif %}

        <label for="calle_recoleccion">Calle:</label>
        <input
            type="text"
            id="calle_recoleccion"
            name="calle_recoleccion"
            placeholder="Calle"
            value="{{ form_data.calle_recoleccion|default_if_none:'' }}"
            required>
        {% if errors.calle_recoleccion %}
            <p style="color: red;">{{ errors.calle_recoleccion }}</p>
        {% endif %}

        <label for="numero_recoleccion">Número:</label>
        <input
            type="text"
            id="numero_recoleccion"
            name="numero_recoleccion"
            placeholder="Número"
            value="{{ form_data.numero_recoleccion|default_if_none:'' }}"
            required>
        {% if errors.numero_recoleccion %}
            <p style="color: red;">{{ errors.numero_recoleccion }}</p>
        {% endif %}

        <label for="codigo_postal_recoleccion">Código Postal:</label>
        <input
            type="text"
            id="codigo_postal_recoleccion"
            name="codigo_postal_recoleccion"
            placeholder="Código Postal"
            value="{{ form_data.codigo_postal_recoleccion|default_if_none:'' }}"
            required>
        {% if errors.codigo_postal_recoleccion %}
            <p style="color: red;">{{ errors.codigo_postal_recoleccion }}</p>
        {% endif %}

        <!-- Estado de Origen -->
        <label for="estado_origen">Estado de Origen:</label>
        <select id="estado_origen" name="estado_origen_id" required>
            <option value="" disabled {% if not form_data.estado_origen_id %}selected{% endif %}>Seleccione un estado</option>
            {% for estado in estados %}
            <option value="{{ estado.id }}" {% if form_data.estado_origen_id == estado.id|stringformat:"s" %}selected{% endif %}>{{ estado.nombre }}</option>
            {% endfor %}
        </select>
        {% if errors.estado_origen_id %}
            <p style="color: red;">{{ errors.estado_origen_id }}</p>
        {% endif %}

        <!-- Nombre del Receptor -->
        <label for="nombre_receptor">Nombre del Receptor:</label>
        <input
            type="text"
            id="nombre_receptor"
            name="receptor"
            placeholder="Nombre completo del receptor"
            value="{{ form_data.receptor|default_if_none:'' }}"
            required>
        {% if errors.receptor %}
            <p style="color: red;">{{ errors.receptor }}</p>
        {% endif %}

        <!-- Dirección de Entrega Descompuesta -->
        <h2>Dirección de Entrega</h2>
        <label for="colonia_entrega">Colonia:</label>
        <input
            type="text"
            id="colonia_entrega"
            name="colonia_entrega"
            placeholder="Colonia"
            value="{{ form_data.colonia_entrega|default_if_none:'' }}"
            required>
        {% if errors.colonia_entrega %}
            <p style="color: red;">{{ errors.colonia_entrega }}</p>
        {% endif %}

        <label for="calle_entrega">Calle:</label>
        <input
            type="text"
            id="calle_entrega"
            name="calle_entrega"
            placeholder="Calle"
            value="{{ form_data.calle_entrega|default_if_none:'' }}"
            required>
        {% if errors.calle_entrega %}
            <p style="color: red;">{{ errors.calle_entrega }}</p>
        {% endif %}

        <label for="numero_entrega">Número:</label>
        <input
            type="text"
            id="numero_entrega"
            name="numero_entrega"
            placeholder="Número"
            value="{{ form_data.numero_entrega|default_if_none:'' }}"
            required>
        {% if errors.numero_entrega %}
            <p style="color: red;">{{ errors.numero_entrega }}</p>
        {% endif %}

        <label for="codigo_postal_entrega">Código Postal:</label>
        <input
            type="text"
            id="codigo_postal_entrega"
            name="codigo_postal_entrega"
            placeholder="Código Postal"
            value="{{ form_data.codigo_postal_entrega|default_if_none:'' }}"
            required>
        {% if errors.codigo_postal_entrega %}
            <p style="color: red;">{{ errors.codigo_postal_entrega }}</p>
        {% endif %}

        <!-- Estado de Destino -->
        <label for="estado_destino">Estado de Destino:</label>
        <select id="estado_destino" name="estado_destino_id" required>
            <option value="" disabled {% if not form_data.estado_destino_id %}selected{% endif %}>Seleccione un estado</option>
            {% for estado in estados %}
            <option value="{{ estado.id }}" {% if form_data.estado_destino_id == estado.id|stringformat:"s" %}selected{% endif %}>{{ estado.nombre }}</option>
            {% endfor %}
        </select>
        {% if errors.estado_destino_id %}
            <p style="color: red;">{{ errors.estado_destino_id }}</p>
        {% endif %}

        <!-- Peso del Paquete -->
        <label for="peso">Peso del Paquete (kg):</label>
        <input
            type="number"
            id="peso"
            name="peso"
            step="0.1"
            placeholder="Ingrese el peso en kilogramos"
            value="{{ form_data.peso|default_if_none:'' }}"
            required>
        {% if errors.peso %}
            <p style="color: red;">{{ errors.peso }}</p>
        {% endif %}

        <!-- Descripción del Paquete -->
        <label for="descripcion">Descripción del Paquete:</label>
        <textarea
            id="descripcion"
            name="descripcion"
            placeholder="Describa el contenido del paquete"
            required>{{ form_data.descripcion|default_if_none:'' }}</textarea>
        {% if errors.descripcion %}
            <p style="color: red;">{{ errors.descripcion }}</p>
        {% endif %}

        <button type="submit">Solicitar Recolección</button>

    </form>

    {% if codigo %}
        <h2>Detalles del Paquete</h2>
        <table>
            <tr>
                <th>Número de Rastreo</th>
                <td>{{ codigo }}</td>
            </tr>
            <tr>
                <th>Estado de Origen</th>
                <td>{{ estado_origen }}</td>
            </tr>
            <tr>
                <th>Estado de Destino</th>
                <td>{{ estado_destino }}</td>
            </tr>
            <tr>
                <th>Peso</th>
                <td>{{ peso }} kg</td>
            </tr>
            <tr>
                <th>Descripción</th>
                <td>{{ descripcion }}</td>
            </tr>
            <tr>
                <th>Nombre del Receptor</th>
                <td>{{ receptor }}</td>
            </tr>
            <tr>
                <th>Dirección de Entrega</th>
                <td>{{ colonia_entrega }}, {{ calle_entrega }}, {{ numero_entrega }}, C.P. {{ codigo_postal_entrega }}</td>
            </tr>
            <tr>
                <th>Nombre del Remitente</th>
                <td>{{ remitente }}</td>
            </tr>
            <tr>
                <th>Dirección de Recolección</th>
                <td>{{ colonia_recoleccion }}, {{ calle_recoleccion }}, {{ numero_recoleccion }}, C.P. {{ codigo_postal_recoleccion }}</td>
            </tr>
        </table>
    {% elif error %}
        <p style="color: red;">{{ error }}</p>
    {% endif %}
</div>

{% endblock %}
